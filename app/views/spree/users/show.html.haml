.row
  - if @user.doctor? and !@user.phone_is_verified?
    = render 'phone_verification'
  .six.columns
    %h1
      = accurate_title
      %small
        (#{link_to Spree.t(:edit), spree.edit_account_path})
    .account-summary{"data-hook" => "account_summary"}
      %dl#user-info
        - if @user.doctor?
          %dt Name
          %dd= @user.doctor.name
          %dt Clinics:
          - @user.doctor.doctor_employments.all.each do |employment|
            %dd
              = employment.clinic.name
              - if employment.clinic.user == spree_current_user
                (#{link_to 'Edit', edit_clinic_path(employment.clinic)})
            %dd
              = employment.consultation_price
              = employment.consultation_currency
          %dt About:
          %dd= @user.doctor.description
          %dt Degree:
          %dd= @user.doctor.degree
          %dt Phone:
          %dd= @user.doctor.phone
          %dt Available for instant booking:
          %dd= t @user.doctor.is_for_instant_booking.class
          %dt Specialties:
          %dd= @user.doctor.specialties.all.map(&:name).join(', ')
        %dt= Spree.t(:email)
        %dd
          = @user.email
  .nine.columns
    %h3 My Appointments
    - if @user.doctor?
      - @user.doctor.doctor_employments.each do |empl|
        %h5
          at #{empl.clinic.name}:
        = render partial: 'appointments_table', locals: { appointments: empl.appointments, doctor: true}
      - # elsif ! @user.doctor? && ! @user.clinic?
      %h5 Own appointments
    = render partial: 'appointments_table', locals: { appointments: @user.appointments, doctor: false}
.row
  .twelve.columns
    .account-my-orders{"data-hook" => "account_my_orders"}
      %h3= Spree.t(:my_orders)
      - if @orders.present?
        %table.order-summary
          %thead
            %tr
              %th.order-number= I18n.t(:number, :scope => 'activerecord.attributes.spree/order')
              %th.order-date= Spree.t(:date)
              %th.order-status= Spree.t(:status)
              %th.order-payment-state= Spree.t(:payment_state)
              %th.order-shipment-state= Spree.t(:shipment_state)
              %th.order-total= Spree.t(:total)
          %tbody
            - @orders.each do |order|
              %tr{:class => "#{cycle('even', 'odd')}"}
                %td.order-number= link_to order.number, order_url(order)
                %td.order-date= l order.completed_at.to_date
                %td.order-status= Spree.t("order_state.#{order.state}").titleize
                %td.order-payment-state= Spree.t("payment_states.#{order.payment_state}").titleize if order.payment_state
                %td.order-shipment-state= Spree.t("shipment_states.#{order.shipment_state}").titleize if order.shipment_state
                %td.order-total= order.display_total
      - else
        %p= Spree.t(:you_have_no_orders_yet)
      %br/
